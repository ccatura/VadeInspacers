<html>
<head><title>VADE INSPACERS</title>

<!--REFERENCE SITES
	http://jsfiddle.net/kzXek/ 
	https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_animate_3
	
	http://jqfundamentals.com/chapter/jquery-basics
-->


<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"> <!--bootstrap-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <!--bootstrap-->
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <!--bootstrap-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <!--jquery-->

<style>
@font-face {
	font-family: 'PixelEmulator-xq08';
	src: url('fonts/PixelEmulator-xq08.ttf');
	format('truetype');
}
body {
	font-family: 'PixelEmulator-xq08';
	font-size: 32px;
	background-color: #000000;
	color: #ffffff;
	margin: 0px 0px 0px 0px;
	line-height: 28px;
	overflow: hidden;
}
.topHeader {
	text-align: center;
}
.bottomFooter {
	text-align: left;
	position: absolute;
	bottom: 1px;
}
.centerParagraph {
	text-align: center;
	position: relative;
	top: 100px;
}
#player {
	width: 100px;
	position: absolute;
	bottom: 70px;
}
#bullet {
	width: 7px;
	height 40px;
	position: absolute;
	background: #ffffff;
}
#blinker {
	opacity: 1;
}

</style>

<script>

function game() {
	var score = 0; //resets score
	var playerPos = (($(window).width() / 2) - ($("#player").width() / 2)); //starts player in middle of screen
	var bottomPos = 70;
	var player = document.getElementById("player"); //sets player graphic to player variable
	var bullet = document.getElementById("bullet"); //sets bullet graphic to bullet variable
	var bulletSpeed = 3;
	var speed = 1; //speed of player
	var playerPadding = 10; //padding between player and sides of screen
	
	var moveLeft = 0; //left movement "boolean"
	var moveRight = 0; //right movement "boolean"

	var shooting = 0;
	
	var sound1 = document.getElementById("shootSound");
	var bg_lo = document.getElementById("bg_lo");
	var bg_hi = document.getElementById("bg_hi");
	var bg_toggle = "bg_lo";
	var bgMusicSpeed = 1000;
	var musicOn = 1;

	var b;

	setInterval(movePlayer, 1); //sets player movement ani
	setInterval(blinker, 500); //sets blinking 1up ani
	var bgPlay = setInterval(bgMusic, bgMusicSpeed); //sets bg music


/**********************************************************
TRY TO MAKE THIS FUNCTION INTO JQUERY
**********************************************************/
	function movePlayer() {

		if (moveLeft) { //moves player to left
			if (!(playerPos < playerPadding)) {
				if (playerPos > $(window).width() - ($("#player").width() + playerPadding)) playerPos = $(window).width() - ($("#player").width() + playerPadding);
					player.style.left = (playerPos-= speed) + "px";
					//console.log("Moving Left");
			}
		} else if (moveRight) { //moves player to right
			if (!(playerPos > $(window).width() - ($("#player").width() + playerPadding))) {
				player.style.left = (playerPos+= speed) + "px";
				//console.log("Moving Right");
			}
		} else { //does not move player
			console.log("Stopped");
		}
	}


/**********************************************************
MAKE THIS FUNCTION INTO JQUERY
**********************************************************/
	function blinker() { //makes 1up on top of screen blink
		if (document.getElementById("blinker").style.opacity == "0") {
			document.getElementById("blinker").style.opacity = "1";
		} else {
			document.getElementById("blinker").style.opacity = "0";
		};
	}



/**********************************************************
MAKE THIS FUNCTION INTO JQUERY
**********************************************************/
	function bang() {
		if ((bottomPos < $(window).height()) && shooting == 1) {
			bullet.style.bottom = (bottomPos+= bulletSpeed) + "px";
		} else {
			clearInterval(b);
			bottomPos = 70;
			shooting = 0;
		}
		//console.log("Bottom: " + bullet.style.bottom + " Left: " + bullet.style.left);
	}
	
	
	function bgMusic () {
	if (musicOn ==1) {
		if (bgMusicSpeed > 260) bgMusicSpeed-= 5;
			if (bg_toggle == "bg_hi") {
				bg_hi.play();
				bg_toggle = "bg_lo";
			} else {
				bg_lo.play();
				bg_toggle = "bg_hi";
			}
		}
	clearInterval(bgPlay);
	bgPlay = setInterval(bgMusic, bgMusicSpeed);
	//console.log(bgMusicSpeed);
	}
	
	

	
	document.getElementById("score").innerHTML = score; //set initial score
	player.style.left = playerPos + "px"; //set initial position of player
	player.style.bottom = bottomPos + "px"; //set initial position of player
	bullet.style.left = playerPos + 50 + "px"; //set initial position of bullet
	bullet.style.bottom = "-40px"; //set initial position of bullet
	

	$(document).ready(function() {
		$(document).keydown(function (e) {
			ek = e.keyCode
			$(".centerParagraph").css("display", "none"); //makes instruction dissapear when first key is pressed
			document.getElementById("credit").innerHTML = "0"; //changes credit to zero when game starts
			if (ek == 77) {if (musicOn == 1) {musicOn = 0} else {musicOn = 1};} //msuic toggle
			if (ek == 37) {moveLeft = 1;} //while left arrow key pressed, move state enabled
			if (ek == 39) {moveRight = 1;} //while right arrow key pressed, move state enabled
			if (ek == 32 && shooting == 0) {
				sound1.play(); //plays the bang sound (the shoot sound)
				shooting = 1;
				bullet.style.left = playerPos + 50 + "px"; 
				bullet.style.bottom = bottomPos + 30 + "px"; 
				b = setInterval(bang, 1);
				bang();
				//console.log("Bang!");
			}
			});

		$(document).keyup(function (e) { //these help smooth the movement of the player
			ek = e.keyCode
			if (ek == 37) {moveLeft = 0;} //when left arrow key not pressed, move state disabled
			if (ek == 39) {moveRight = 0;} //when right arrow key not pressed, move state disabled
			});
	});
}
</script>







</head>
<body onLoad="game();">

<!-- setup game sounds -->
<audio id="shootSound"><source src="sounds/shoot.wav" type="audio/wav"></audio>
<audio id="bg_hi"><source src="sounds/bg_hi.wav" type="audio/wav"></audio>
<audio id="bg_lo"><source src="sounds/bg_lo.wav" type="audio/wav"></audio>


<div class="topHeader">
<span style="color: #00aa00;">VADE INSPACERS</span><br>
<span id="blinker">1UP</span><br>
<span id="score"></span>
</div>


<!-- instructions -->
<div class="centerParagraph">
Shoot the aliens!<br><br>
'LEFT/RIGHT' keys to move<br>
'SPACE' to fire<br>
'M' to toggle music<br><br>
Press any key to start
</div>



<span class="bottomFooter">
<hr style="width: 1000%; margin: 0px; border: 1px solid #ffffff;">
CREDIT <span id="credit">1</span></span>



<!-- setup graphics -->
<div id="bullet">&nbsp;</div>
<img id="player" src="images/player.png">








</body>

</html>